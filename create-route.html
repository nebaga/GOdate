<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOdate - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=a0d97084-0315-417d-b383-8232b314c041&lang=ru_RU"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>GOdate</h1>
                </div>
                <nav class="nav">
                    <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="routes.html" class="nav-link">–ú–∞—Ä—à—Ä—É—Ç—ã</a>
                    <a href="rating.html" class="nav-link">–†–µ–π—Ç–∏–Ω–≥</a>
                    <a href="profile.html" class="nav-link">–ü—Ä–æ—Ñ–∏–ª—å</a>
                    <a href="ai.html" class="nav-link">–ò–ò –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</a>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-outline" id="loginBtn">–í–æ–π—Ç–∏</button>
                    <button class="btn btn-primary" id="profileBtn" style="display: none;">–ü—Ä–æ—Ñ–∏–ª—å</button>
                </div>
            </div>
        </div>
    </header>

    <main class="page-content">
        <div class="container">
            <h2>–°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞</h2>
            <form class="create-route-form" id="createRouteForm">
                <div class="form-group">
                    <label for="routeName">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="routeName" name="routeName" required maxlength="100">
                </div>

                <div class="form-group">
                    <label for="routeCity">–ì–æ—Ä–æ–¥</label>
                    <select id="routeCity" name="routeCity" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                        <option value="moscow">–ú–æ—Å–∫–≤–∞</option>
                        <option value="spb">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                        <option value="novosibirsk">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</option>
                        <option value="ekaterinburg">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option>
                        <option value="kazan">–ö–∞–∑–∞–Ω—å</option>
                        <option value="nizhny_novgorod">–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥</option>
                        <option value="chelyabinsk">–ß–µ–ª—è–±–∏–Ω—Å–∫</option>
                        <option value="samara">–°–∞–º–∞—Ä–∞</option>
                        <option value="omsk">–û–º—Å–∫</option>
                        <option value="rostov_on_don">–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É</option>
                        <option value="ufa">–£—Ñ–∞</option>
                        <option value="krasnoyarsk">–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫</option>
                        <option value="perm">–ü–µ—Ä–º—å</option>
                        <option value="voronezh">–í–æ—Ä–æ–Ω–µ–∂</option>
                        <option value="volgograd">–í–æ–ª–≥–æ–≥—Ä–∞–¥</option>
                        <option value="krasnodar">–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä</option>
                        <option value="saratov">–°–∞—Ä–∞—Ç–æ–≤</option>
                        <option value="tyumen">–¢—é–º–µ–Ω—å</option>
                        <option value="tolyatti">–¢–æ–ª—å—è—Ç—Ç–∏</option>
                        <option value="izhevsk">–ò–∂–µ–≤—Å–∫</option>
                        <option value="barnaul">–ë–∞—Ä–Ω–∞—É–ª</option>
                        <option value="ulyanovsk">–£–ª—å—è–Ω–æ–≤—Å–∫</option>
                        <option value="irkutsk">–ò—Ä–∫—É—Ç—Å–∫</option>
                        <option value="khabarovsk">–•–∞–±–∞—Ä–æ–≤—Å–∫</option>
                        <option value="yaroslavl">–Ø—Ä–æ—Å–ª–∞–≤–ª—å</option>
                        <option value="vladimir">–í–ª–∞–¥–∏–º–∏—Ä</option>
                        <option value="makhachkala">–ú–∞—Ö–∞—á–∫–∞–ª–∞</option>
                        <option value="tomsk">–¢–æ–º—Å–∫</option>
                        <option value="orenburg">–û—Ä–µ–Ω–±—É—Ä–≥</option>
                        <option value="kemerovo">–ö–µ–º–µ—Ä–æ–≤–æ</option>
                        <option value="ryazan">–†—è–∑–∞–Ω—å</option>
                        <option value="astrakhan">–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å</option>
                        <option value="naberezhnye_chelny">–ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã</option>
                        <option value="penza">–ü–µ–Ω–∑–∞</option>
                        <option value="lipetsk">–õ–∏–ø–µ—Ü–∫</option>
                        <option value="kirov">–ö–∏—Ä–æ–≤</option>
                        <option value="cheboksary">–ß–µ–±–æ–∫—Å–∞—Ä—ã</option>
                        <option value="tula">–¢—É–ª–∞</option>
                        <option value="kaliningrad">–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥</option>
                        <option value="kursk">–ö—É—Ä—Å–∫</option>
                        <option value="stavropol">–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å</option>
                        <option value="sochi">–°–æ—á–∏</option>
                        <option value="ivanovo">–ò–≤–∞–Ω–æ–≤–æ</option>
                        <option value="bryansk">–ë—Ä—è–Ω—Å–∫</option>
                        <option value="belgorod">–ë–µ–ª–≥–æ—Ä–æ–¥</option>
                        <option value="arzamas">–ê—Ä–∑–∞–º–∞—Å</option>
                        <option value="vladivostok">–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫</option>
                        <option value="sevastopol">–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å</option>
                        <option value="grozny">–ì—Ä–æ–∑–Ω—ã–π</option>
                        <option value="kaluga">–ö–∞–ª—É–≥–∞</option>
                        <option value="smolensk">–°–º–æ–ª–µ–Ω—Å–∫</option>
                        <option value="volzhsky">–í–æ–ª–∂—Å–∫–∏–π</option>
                        <option value="murmansk">–ú—É—Ä–º–∞–Ω—Å–∫</option>
                        <option value="vladikavkaz">–í–ª–∞–¥–∏–∫–∞–≤–∫–∞–∑</option>
                        <option value="sterlitamak">–°—Ç–µ—Ä–ª–∏—Ç–∞–º–∞–∫</option>
                        <option value="gatchina">–ì–∞—Ç—á–∏–Ω–∞</option>
                        <option value="yoshkar_ola">–ô–æ—à–∫–∞—Ä-–û–ª–∞</option>
                        <option value="nazran">–ù–∞–∑—Ä–∞–Ω—å</option>
                        <option value="syktivkar">–°—ã–∫—Ç—ã–≤–∫–∞—Ä</option>
                        <option value="nakhodka">–ù–∞—Ö–æ–¥–∫–∞</option>
                        <option value="yuzhno_sakhalinsk">–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫</option>
                        <option value="birobidzhan">–ë–∏—Ä–æ–±–∏–¥–∂–∞–Ω</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="routeTime">‚è±Ô∏è –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è (–º–∏–Ω—É—Ç—ã)</label>
                    <input type="number" id="routeTime" name="routeTime" placeholder="0" min="30" required>
                </div>

                <div class="form-group">
                    <label for="routeBudget">üí∞ –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –±—é–¥–∂–µ—Ç (—Ä—É–±–ª–∏)</label>
                    <input type="number" id="routeBudget" name="routeBudget" placeholder="0" min="1" required>
                </div>

                <div class="form-group">
                    <label for="routeDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="routeDescription" name="routeDescription" rows="4" required maxlength="500"></textarea>
                </div>

                <div class="form-group">
                    <label>–¢–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞</label>
                    <div class="route-points" id="routePoints"></div>
                    <button type="button" class="btn btn-outline" id="addPointBtn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É</button>
                    <div class="route-result mt-2" style="height: 380px;">
                        <div id="routeConstructorMap" style="width: 100%; height: 100%; border-radius: 12px;"></div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-outline" id="cancelCreateRoute">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary" id="saveRouteBtn">
                        <span class="btn-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                        <span class="btn-loading" style="display: none;">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
                    </button>
                </div>
            </form>
        </div>
    </main>

    <div class="modal" id="notificationModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="modalOkBtn">OK</button>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>

    <script>
         window.API_CONFIG = {
             BASE_URL: 'http://localhost:8876/api',
            ENDPOINTS: {
                AUTH: '/auth',
                USERS: '/users',
                ROUTES: '/routes',
                MESSAGES: '/messages',
                DAILIES: '/dailies',
                RATING: '/rating'
            },
            HEADERS: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            }
        };

        window.getAuthToken = function() {
            return localStorage.getItem('godate_token');
        };

        window.getAuthHeaders = function() {
            const token = window.getAuthToken();
            return token ? {
                ...window.API_CONFIG.HEADERS,
                'Authorization': `Bearer ${token}`
            } : window.API_CONFIG.HEADERS;
        };
    </script>

    <script src="js/api.js"></script>
    <script src="js/common.js"></script>
    <script src="js/create-route.js"></script>
</body>
</html>